#include <benchmark/benchmark.h>

#include "../library.h"

static void Addition(benchmark::State& state, const Z7::Z7Index& a, const Z7::Z7Index& b)
{
    // Perform setup here

    for (auto _ : state)
    {
        // This code gets timed
        const Z7::Z7Index r = a + b;
        benchmark::DoNotOptimize(r);
    }
}

// Register the function as a benchmark, multiple times to see consistency
BENCHMARK_CAPTURE(Addition, 1100112121212121165665 + 1100111111111111324641, "1100112121212121165665"_Z7, "1100111111111111324641"_Z7);
BENCHMARK_CAPTURE(Addition, 1100000000000000011212 + 1100000000000000013616, "1100000000000000011212"_Z7, "1100000000000000013616"_Z7);
BENCHMARK_CAPTURE(Addition, 0800447777777777777777 + 0800567777777777777777, "080044"_Z7, "080056"_Z7);
BENCHMARK_CAPTURE(Addition, 1100112121212121165665 + 1100111111111111324641, "1100112121212121165665"_Z7, "1100111111111111324641"_Z7);
BENCHMARK_CAPTURE(Addition, 1100000000000000011212 + 1100000000000000013616, "1100000000000000011212"_Z7, "1100000000000000013616"_Z7);
BENCHMARK_CAPTURE(Addition, 0800447777777777777777 + 0800567777777777777777, "080044"_Z7, "080056"_Z7);

BENCHMARK_MAIN();
